(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(2),r=n.n(a),i=n(14),u=n.n(i),o=(n(20),n(3)),d=n(4),l=n.n(d),s="/api/persons",j={getAll:function(){return l.a.get(s).then((function(e){return e.data}))},add:function(e){return l.a.put(s,e).then((function(e){return e.data}))},update:function(e,t){return l.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))}},b=function(e){var t=e.name,n=e.message,a=e.type;return Object(c.jsxs)("div",{className:"notification ".concat(a),children:[Object(c.jsx)("span",{className:"name",children:t}),n&&Object(c.jsx)("span",{className:"message",children:n})]})},h=function(e){var t=e.id,n=e.text,a=e.value,r=e.handleChange,i=e.type;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("label",{htmlFor:t,children:Object(c.jsx)("span",{children:n})})}),Object(c.jsx)("td",{children:Object(c.jsx)("input",{id:t,type:i,value:a,onChange:r})})]})},m=function(e){var t=e.inputs,n=e.handleSubmit,a=e.heading,r=e.submitText;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsx)("h2",{children:a}),Object(c.jsx)("table",{children:Object(c.jsx)("tbody",{children:t.map((function(e,t){return Object(c.jsx)(h,{id:e.text+t,type:e.type,text:e.text,value:e.value,handleChange:e.handleChange},e.text+t)}))})}),n&&Object(c.jsx)("button",{type:"submit",children:r})]})},f=function(e){var t=e.name,n=e.number,a=e.id,r=e.clickHandler;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t}),Object(c.jsx)("td",{children:n}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){return r(a)},children:"Remove"})})]})},p=function(e){var t=e.phonenumbers,n=e.clickHandler;return Object(c.jsx)("table",{children:Object(c.jsx)("tbody",{children:t.map((function(e){return Object(c.jsx)(f,{name:e.name,number:e.number,id:e.id,clickHandler:n},e.name)}))})})},O=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),u=Object(o.a)(i,2),d=u[0],l=u[1],s=Object(a.useState)(""),h=Object(o.a)(s,2),f=h[0],O=h[1],v=Object(a.useState)(""),x=Object(o.a)(v,2),g=x[0],y=x[1],S=Object(a.useState)(""),w=Object(o.a)(S,2),C=w[0],k=w[1],F=Object(a.useState)(""),A=Object(o.a)(F,2),H=A[0],N=A[1],T=Object(a.useState)(""),D=Object(o.a)(T,2),E=D[0],J=D[1],L=function(e){var t=e.name,n=e.message,c=e.type;N(n),k(t),J(c),setTimeout((function(){N(null),k(null),J(null)}),5e3)},R=function(){j.getAll().then((function(e){r(e)}))};Object(a.useEffect)((function(){R()}),[]);var B=function(e,t){j.update(e.id,t).then((function(t){r(n.map((function(n){return n.id===e.id?t:n}))),L({name:"Updated number for ' ".concat(e.name," '"),type:"success"}),l(""),O("")})).catch((function(t){var n,c;L({name:"Failed to update info for ' ".concat(e.name," '"),message:null===t||void 0===t||null===(n=t.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.error,type:"error"}),R()}))},I=g?n.filter((function(e){return e.name.toLowerCase().includes(g)})):n;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(b,{name:C,message:H,type:E}),Object(c.jsx)(m,{heading:"Filter",inputs:[{type:"text",text:"filter shown with",value:g,handleChange:function(e){y(e.target.value.toLowerCase())}}]}),Object(c.jsx)(m,{heading:"Add new",handleSubmit:function(e){e.preventDefault();var t,c={name:d.trim(),number:f.trim()},a=(t=d,n.find((function(e){return e.name===t})));if(a)return B(a,c);j.add(c).then((function(e){r(n.concat(e)),L({name:"Added a number for ' ".concat(d," '"),type:"success"}),l(""),O("")})).catch((function(e){var t,n;L({name:"Failed to add info for ' ".concat(d," '"),message:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,type:"error"}),R()}))},submitText:"add",inputs:[{type:"text",text:"name:",value:d,handleChange:function(e){l(e.target.value)}},{type:"tel",text:"number:",value:f,handleChange:function(e){O(e.target.value)}}]}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(p,{phonenumbers:I,clickHandler:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Do you really want to remove the person from phonebook?")&&j.remove(e).then((function(){L({name:"Removed number for ' ".concat(t.name," '"),type:"success"}),R()})).catch((function(e){var n,c;L({name:"Failed to delete data for ' ".concat(t.name," '"),message:null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.error,type:"error"}),R()}))}})]})};u.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(O,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fc2a7a1e.chunk.js.map