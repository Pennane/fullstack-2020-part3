{"version":3,"sources":["services/number.js","App.js","index.js"],"names":["baseUrl","numberService","getAll","axios","get","then","res","data","add","newObject","post","update","id","put","remove","delete","Notification","message","type","className","Input","text","value","handleChange","onChange","Form","inputs","handleSubmit","heading","submitText","onSubmit","map","input","i","PhoneNumber","name","number","clickHandler","onClick","PhoneNumbers","phonenumbers","person","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","notification","setNotification","notificationType","setNotificationType","notify","setTimeout","updateAll","numbers","useEffect","updatePerson","updated","_person","catch","err","peopleToShow","toLowerCase","includes","event","target","preventDefault","personObject","presentPerson","find","concat","window","confirm","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dd546079.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  let request = axios.get(baseUrl)\n  return request.then((res) => res.data)\n}\n\nconst add = (newObject) => {\n  let request = axios.post(baseUrl, newObject)\n  return request.then((res) => res.data)\n}\n\nconst update = (id, newObject) => {\n  let request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then((res) => res.data)\n}\n\nconst remove = (id) => {\n  let request = axios.delete(`${baseUrl}/${id}`)\n  return request.then((res) => res.data)\n}\n\nconst numberService = {\n  getAll,\n  add,\n  update,\n  remove\n}\n\nexport default numberService\n","import React, { useState, useEffect } from 'react'\nimport numberService from './services/number'\n\nconst Notification = ({ message, type }) => {\n  return (\n    <div className={`notification ${type}`}>\n      <span>{message}</span>\n    </div>\n  )\n}\n\nconst Input = ({ text, value, handleChange, type }) => {\n  return (\n    <div>\n      <label>\n        <span>{text}</span>\n        <input type={type} value={value} onChange={handleChange} />\n      </label>\n    </div>\n  )\n}\n\nconst Form = ({ inputs, handleSubmit, heading, submitText }) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <h2>{heading}</h2>\n      {inputs.map((input, i) => (\n        <Input key={i} type={input.type} text={input.text} value={input.value} handleChange={input.handleChange} />\n      ))}\n      {handleSubmit && <button type=\"submit\">{submitText}</button>}\n    </form>\n  )\n}\n\nconst PhoneNumber = ({ name, number, id, clickHandler }) => {\n  return (\n    <tr>\n      <td>{name}</td>\n      <td>{number}</td>\n      <td>\n        <button onClick={() => clickHandler(id)}>Remove</button>\n      </td>\n    </tr>\n  )\n}\n\nconst PhoneNumbers = ({ phonenumbers, clickHandler }) => {\n  return (\n    <table>\n      <tbody>\n        {phonenumbers.map((person) => (\n          <PhoneNumber\n            name={person.name}\n            number={person.number}\n            id={person.id}\n            key={person.name}\n            clickHandler={clickHandler}\n          />\n        ))}\n      </tbody>\n    </table>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [notification, setNotification] = useState('')\n  const [notificationType, setNotificationType] = useState('')\n\n  const notify = ({ message, type }) => {\n    setNotification(message)\n    setNotificationType(type)\n    setTimeout(() => {\n      setNotification(null)\n      setNotificationType(null)\n    }, 5000)\n  }\n\n  const isPresent = (name) => persons.find((person) => person.name === name)\n\n  const updateAll = () => {\n    numberService.getAll().then((numbers) => {\n      setPersons(numbers)\n    })\n  }\n\n  useEffect(() => {\n    updateAll()\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    let presentPerson = isPresent(newName)\n\n    if (presentPerson) return updatePerson(presentPerson, personObject)\n\n    numberService\n      .add(personObject)\n      .then((numbers) => {\n        setPersons(persons.concat(numbers))\n        notify({\n          message: `Added a new number for ${newName}`,\n          type: `success`\n        })\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch((err) => {\n        notify({\n          message: `Failed to add info for ${newName}`,\n          type: `error`\n        })\n        updateAll()\n      })\n  }\n\n  const updatePerson = (person, newObject) => {\n    numberService\n      .update(person.id, newObject)\n      .then((updated) => {\n        setPersons(persons.map((_person) => (_person.id === person.id ? updated : _person)))\n        notify({\n          message: `Updated number for ${person.name}`,\n          type: `success`\n        })\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch((err) => {\n        notify({\n          message: `Info for ${person.name} had been deleted before update`,\n          type: `error`\n        })\n        updateAll()\n      })\n  }\n\n  const deletePerson = (id) => {\n    let person = persons.find((person) => person.id === id)\n    if (!window.confirm('Do you really want to remove the person from phonebook?')) return\n    numberService\n      .remove(id)\n      .then(() => {\n        notify({\n          message: `Removed ${person.name}'s number`,\n          type: `success`\n        })\n        updateAll()\n      })\n      .catch((err) => {\n        notify({\n          message: `Information of ${person.name} had already been removed`,\n          type: `error`\n        })\n        updateAll()\n      })\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value.toLowerCase())\n  }\n\n  const peopleToShow = filter ? persons.filter((person) => person.name.toLowerCase().includes(filter)) : persons\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={notification} type={notificationType} />\n      <Form\n        heading=\"Filter\"\n        inputs={[{ type: 'text', text: 'filter shown with', value: filter, handleChange: handleFilterChange }]}\n      />\n      <Form\n        heading=\"Add new\"\n        handleSubmit={addPerson}\n        submitText=\"add\"\n        inputs={[\n          { type: 'text', text: 'name:', value: newName, handleChange: handleNameChange },\n          { type: 'tel', text: 'number:', value: newNumber, handleChange: handleNumberChange }\n        ]}\n      />\n      <h2>Numbers</h2>\n      <PhoneNumbers phonenumbers={peopleToShow} clickHandler={deletePerson} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}