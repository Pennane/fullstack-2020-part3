(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(2),r=n.n(a),u=n(14),i=n.n(u),o=(n(20),n(3)),s=n(4),d=n.n(s),l="/api/persons",j={getAll:function(){return d.a.get(l).then((function(e){return e.data}))},add:function(e){return d.a.put(l,e).then((function(e){return e.data}))},update:function(e,t){return d.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},b=function(e){var t=e.name,n=e.message,a=e.type;return Object(c.jsxs)("div",{className:"notification ".concat(a),children:[Object(c.jsx)("span",{className:"name",children:t}),n&&Object(c.jsx)("span",{className:"message",children:n})]})},m=function(e){var t=e.text,n=e.value,a=e.handleChange,r=e.type;return Object(c.jsx)("div",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:t}),Object(c.jsx)("input",{type:r,value:n,onChange:a})]})})},h=function(e){var t=e.inputs,n=e.handleSubmit,a=e.heading,r=e.submitText;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsx)("h2",{children:a}),t.map((function(e,t){return Object(c.jsx)(m,{type:e.type,text:e.text,value:e.value,handleChange:e.handleChange},t)})),n&&Object(c.jsx)("button",{type:"submit",children:r})]})},f=function(e){var t=e.name,n=e.number,a=e.id,r=e.clickHandler;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t}),Object(c.jsx)("td",{children:n}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){return r(a)},children:"Remove"})})]})},p=function(e){var t=e.phonenumbers,n=e.clickHandler;return Object(c.jsx)("table",{children:Object(c.jsx)("tbody",{children:t.map((function(e){return Object(c.jsx)(f,{name:e.name,number:e.number,id:e.id,clickHandler:n},e.name)}))})})},O=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],u=Object(a.useState)(""),i=Object(o.a)(u,2),s=i[0],d=i[1],l=Object(a.useState)(""),m=Object(o.a)(l,2),f=m[0],O=m[1],x=Object(a.useState)(""),v=Object(o.a)(x,2),g=v[0],y=v[1],w=Object(a.useState)(""),S=Object(o.a)(w,2),C=S[0],k=S[1],A=Object(a.useState)(""),F=Object(o.a)(A,2),H=F[0],N=F[1],T=Object(a.useState)(""),D=Object(o.a)(T,2),E=D[0],J=D[1],L=function(e){var t=e.name,n=e.message,c=e.type;N(n),k(t),J(c),setTimeout((function(){N(null),k(null),J(null)}),5e3)},R=function(){j.getAll().then((function(e){r(e)}))};Object(a.useEffect)((function(){R()}),[]);var B=function(e,t){j.update(e.id,t).then((function(t){r(n.map((function(n){return n.id===e.id?t:n}))),L({message:"Updated number for ".concat(e.name),type:"success"}),d(""),O("")})).catch((function(t){L({name:"Failed to update info for ".concat(e.name),message:t,type:"error"}),R()}))},I=g?n.filter((function(e){return e.name.toLowerCase().includes(g)})):n;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(b,{name:C,message:H,type:E}),Object(c.jsx)(h,{heading:"Filter",inputs:[{type:"text",text:"filter shown with",value:g,handleChange:function(e){y(e.target.value.toLowerCase())}}]}),Object(c.jsx)(h,{heading:"Add new",handleSubmit:function(e){e.preventDefault();var t,c={name:s.trim(),number:f.trim()},a=(t=s,n.find((function(e){return e.name===t})));if(a)return B(a,c);j.add(c).then((function(e){r(n.concat(e)),L({name:"Added a new number for ".concat(s),type:"success"}),d(""),O("")})).catch((function(e){L({name:"Failed to add info for ".concat(s),message:e,type:"error"}),R()}))},submitText:"add",inputs:[{type:"text",text:"name:",value:s,handleChange:function(e){d(e.target.value)}},{type:"tel",text:"number:",value:f,handleChange:function(e){O(e.target.value)}}]}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(p,{phonenumbers:I,clickHandler:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Do you really want to remove the person from phonebook?")&&j.remove(e).then((function(){L({message:"Removed ".concat(t.name,"'s number"),type:"success"}),R()})).catch((function(e){L({name:"Failed to delete data for ".concat(t.name),message:e,type:"error"}),R()}))}})]})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(O,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.30209aa0.chunk.js.map